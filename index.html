<!DOCTYPE html>
<html>
  <head>
    <title>Device Motion Distance</title>
  </head>
  <body>
    <h1>Device Motion Distance</h1>
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
    <p id="distance">Distance: 0 meters</p>
    <script>
      let initialAcceleration = null; // Variable to store initial acceleration
      let distance = 0; // Variable to store calculated distance

      // Start button event listener
      document.getElementById('startBtn').addEventListener('click', function () {
        // Add event listener for device motion
        window.addEventListener('devicemotion', handleDeviceMotion);
      });

      // Stop button event listener
      document.getElementById('stopBtn').addEventListener('click', function () {
        // Remove event listener for device motion
        window.removeEventListener('devicemotion', handleDeviceMotion);
        // Reset distance and initialAcceleration
        distance = 0;
        initialAcceleration = null;
        // Update distance text
        document.getElementById('distance').textContent = 'Distance: 0 meters';
      });

      // Function to handle device motion event
      function handleDeviceMotion(event) {
        // Get acceleration values from event
        const acceleration = event.accelerationIncludingGravity;
        // If initialAcceleration is null, set it to current acceleration values
        if (!initialAcceleration) {
          initialAcceleration = acceleration;
        } else {
          // Calculate acceleration differences
          const diffX = acceleration.x - initialAcceleration.x;
          const diffY = acceleration.y - initialAcceleration.y;
          const diffZ = acceleration.z - initialAcceleration.z;
          // Calculate distance using Pythagorean theorem
          const distanceMoved = Math.sqrt(diffX * diffX + diffY * diffY + diffZ * diffZ);
          // Add distanceMoved to total distance
          distance += distanceMoved;
          // Update distance text
          document.getElementById('distance').textContent = `Distance: ${distance.toFixed(2)} meters`;
        }
      }
    </script>
  </body>
</html>
