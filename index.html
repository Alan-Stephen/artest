<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-box id="myBox" position="0 0 -5" color="red"></a-box>
    </a-scene>

    <script>
      // Get reference to the box entity
      var box = document.querySelector('#myBox');

      // Check for geolocation support
      if (navigator.geolocation) {
        // Watch for changes in position
        navigator.geolocation.watchPosition(function(position) {
          // Get user's position
          var userLat = position.coords.latitude;
          var userLon = position.coords.longitude;

          // Calculate position of the box to the north
          var boxDistance = 0.01; // Distance in kilometers
          var boxBearing = 0; // Bearing in degrees (0 = north)
          var boxLatLon = calculateDestination(userLat, userLon, boxDistance, boxBearing);

          // Update the position of the box
          box.setAttribute('position', {x: boxLatLon.lon, y: 1, z: boxLatLon.lat});
        });
      } else {
        console.error('Geolocation is not supported in this browser.');
      }

      // Calculate destination using haversine formula
      function calculateDestination(lat, lon, distance, bearing) {
        var R = 6371; // Radius of the Earth in km
        var d = distance / R; // Distance in radians

        var lat1 = toRad(lat);
        var lon1 = toRad(lon);
        var brng = toRad(bearing);

        var lat2 = Math.asin(Math.sin(lat1) * Math.cos(d) +
                  Math.cos(lat1) * Math.sin(d) * Math.cos(brng));
        var lon2 = lon1 + Math.atan2(Math.sin(brng) * Math.sin(d) * Math.cos(lat1),
                  Math.cos(d) - Math.sin(lat1) * Math.sin(lat2));

        lat2 = toDeg(lat2);
        lon2 = toDeg(lon2);

        return { lat: lat2, lon: lon2 };
      }

      // Convert degrees to radians
      function toRad(deg) {
        return deg * (Math.PI/180);
      }

      // Convert radians to degrees
      function toDeg(rad) {
        return rad * (180/Math.PI);
      }
    </script>
  </body>
</html>
