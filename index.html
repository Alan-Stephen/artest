<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-box id="myBox" position="0 0 -5" color="red"></a-box>
    </a-scene>

    <script>
      // Get reference to the box entity
      var box = document.querySelector('#myBox');

      // Check for geolocation support
      if (navigator.geolocation) {
        // Watch for changes in position
        navigator.geolocation.watchPosition(function(position) {
          // Get distance from user's position to the box
          var userLat = position.coords.latitude;
          var userLon = position.coords.longitude;
          var boxLat = 0; // Set the latitude of the box
          var boxLon = 0; // Set the longitude of the box
          var distance = haversine(userLat, userLon, boxLat, boxLon);

          // Set scale of the box based on distance
          var scale = 1 + (distance / 100); // You can adjust the scaling factor as needed
          box.setAttribute('scale', {x: scale, y: scale, z: scale});
        });
      } else {
        console.error('Geolocation is not supported in this browser.');
      }

      // Haversine formula to calculate distance between two coordinates
      function haversine(lat1, lon1, lat2, lon2) {
        var R = 6371; // Radius of the Earth in km
        var dLat = toRad(lat2 - lat1);
        var dLon = toRad(lon2 - lon1);
        var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c * 1000; // Distance in meters
      }

      // Convert degrees to radians
      function toRad(deg) {
        return deg * (Math.PI/180);
      }
    </script>
  </body>
</html>
